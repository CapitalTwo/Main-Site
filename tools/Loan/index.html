<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1.0"
    />
    <meta name="description" content="Online Loan Calculator" />
    <meta
      name="keywords"
      content="HTML, CSS, JavaScript, Calculator, Student Loan, Car Loan, Home Loan, Loan"
    />
    <meta name="author" content="Ritika Mittal" />
    <title>Loan Calculator</title>

    <!-- CSS  -->
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <link
      href="../../css/materialize.css"
      type="text/css"
      rel="stylesheet"
      media="screen,projection"
    />
    <link
      href="../../css/style.css"
      type="text/css"
      rel="stylesheet"
      media="screen,projection"
    />
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    </script>
    <script
      type="text/javascript"
      src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"
    ></script>
    <style>
      body {
        background-image: url(https://cdn.hswstatic.com/gif/loan-personal.jpg);
      }
    </style>
  </head>

  <body>
    <nav class="red" role="navigation">
      <div class="nav-wrapper container">
        <a id="logo-container" href="#" class="brand-logo white-text">Loan Calculator</a>
        <ul class="right hide-on-med-and-down">
          <li><a href="https://capitaltwo.ga/function.html" class="white-text">Go Back</a></li>
          <li><a href="https://capitaltwo.ga" class="white-text">Home Page</a></li>
        </ul>
  
        <ul id="nav-mobile" class="sidenav">
          <li><a href="https://capitaltwo.ga/function.html">Go Back</a></li>
          <li><a href="https://capitaltwo.ga">Home Page</a></li>
        </ul>
        <a href="#" data-target="nav-mobile" class="sidenav-trigger"><i class="material-icons">menu</i></a>
      </div>
    </nav>

    <br /><br />

    <div class="row">
      <div class="col s0 m0 l1"></div>

      <div class="col s12 m12 l5">
        <div class="card white z-depth-3">
          <div class="card-content black-text">
            <h5>General Introduction</h5>
            <p>Welcome to the Loan Calculation Tool.</p>
            <p>
              Enter a loan amount, as well as the term of the loan and expected
              interest rate. We will then provide you with your expected monthly
              payment and total interest accrued over the length of the
              loan.<span id="Speed_text"></span>
            </p>
            <div class="card-action">
              <div id="chart_div"></div>
            </div>
          </div>
        </div>
      </div>

      <div class="col s12 m12 l5">
        <div class="card white z-depth-3">
          <div class="card-content black-text">
            <h5>User Input</h5>
            <p>Please provide relevant information below</p>
          </div>
          <div class="card-action">
            <form id="loan-form">
              <div class="row">
                <div class="input-field col s6">
                  <input
                    id="amount"
                    name="amount"
                    type="text"
                    class="validate"
                    onkeyup="this.value=this.value.replace(/[^\d]/g,'') "
                    onafterpaste="this.value=this.value.replace(/[^\d]/g,'') "
                  />
                  <label for="loan amount">Loan Amount ($)</label>
                </div>
                <div class="input-field col s6">
                  <input
                    id="years"
                    name="years"
                    type="text"
                    class="validate"
                    onkeyup="this.value=this.value.replace(/[^\d]/g,'') "
                    onafterpaste="this.value=this.value.replace(/[^\d]/g,'') "
                  />
                  <label for="period" >Period (Years)</label>
                </div>
                <div class="input-field col s6">
                  <input
                    id="interest"
                    name="interest"
                    type="text"
                    class="validate"
                    onkeyup="this.value=this.value.replace(/[^\d]/g,'') "
                    onafterpaste="this.value=this.value.replace(/[^\d]/g,'') "
                  />
                  <label for="rate" >Interest Rate (%) </label>
                </div>

                <p class="col s9"></p>

                <button
                  class="btn waves-effect waves-light col s3"
                  type="submit"
                  name="action"
                >
                  Submit
                  <i class="material-icons right">send</i>
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <div class="card white z-depth-3">
        <div class="card-content black-text">
          <h5 class="title">Calculated Results</h5>
        </div>
        <div class="card-action black-text">
          <div class="row">
            <div class="col s12 m4">
              <div class="card teal darken-1">
                <div class="card-content white-text">
                  <span class="card-title">Monthly Payment</span>
                  <p id="monthlyPayment">$</p>
                </div>
              </div>
            </div>

            <div class="col s12 m4">
              <div class="card teal darken-1">
                <div class="card-content white-text">
                  <span class="card-title">Total Interest</span>
                  <p id="totalInterest">%</p>
                </div>
              </div>
            </div>
            <div class="col s12 m4">
              <div class="card teal darken-1">
                <div class="card-content white-text">
                  <span class="card-title">Total Amount</span>
                  <p id="totalPayment">$</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <br /><br />
    <footer class="page-footer blue">
      <div class="container">
          <div class="row">
              <div class="col l6 s12">
                  <h5 class="white-text">Bio</h5>
                  <p class="grey-text text-lighten-4">Created by Shaokang, Ritika, Sai, and Peter</p>
              </div>
              <div class="col l3 s12">
                  <h5 class="white-text">Contacts</h5>
                  <ul> 
                      <li><a class="white-text" href="mailto:sjiang97@wisc.edu">Shaokang Jiang</a></li>
                      <li><a class="white-text" href="mailto:rmittal6@wisc.edu">Ritika Mittal</a></li>
                      <li><a class="white-text" href="mailto:chokkarapu@wisc.edu">Sai Chokkarapu</a></li>
                      <li><a class="white-text" href="mailto:pndaly@wisc.edu">Peter Daly</a></li>
                  </ul>
              </div>
              <div class="col l3 s12">
                  <h5 class="white-text">Connect</h5>
                  <ul>
                      <li><a class="white-text" href="#!">Shaokang Jiang</a></li>
                      <li><a class="white-text" href="https://www.linkedin.com/in/ritika-mittal-011ab2178/">Ritika Mittal</a></li>
                      <li><a class="white-text" href="https://www.linkedin.com/in/chokkarapu/">Sai Chokkarapu</a></li>
                      <li><a class="white-text" href="https://www.linkedin.com/in/peterdaly13/">Peter Daly</a></li>
                  </ul>
              </div>
          </div>
      </div>
      <div class="footer-copyright">
        <div class="container">
        </div>
      </div>
  </footer>

    <!--  Scripts-->
    <script src="../../js/materialize.js"></script>
    <script>
      document
        .getElementById("loan-form")
        .addEventListener("submit", computeResults);
      function computeResults(e) {
        const UIamount = document.getElementById("amount").value;
        const UIinterest = document.getElementById("interest").value;
        const UIyears = document.getElementById("years").value;

        // Calculate

        const principal = parseFloat(UIamount);
        const CalculateInterest = parseFloat(UIinterest) / 100 / 12;
        const calculatedPayments = parseFloat(UIyears) * 12;

        //Compute monthly Payment

        const x = Math.pow(1 + CalculateInterest, calculatedPayments);
        const monthly = (principal * x * CalculateInterest) / (x - 1);
        const monthlyPayment = monthly.toFixed(2);

        //Compute Interest

        const totInterest = (
          monthly * calculatedPayments -
          principal
        );
        const totalInterest = totInterest.toFixed(2);

        //Compute Total Payment
        const totPay = (monthly * calculatedPayments);
        const totalPayment = totPay.toFixed(2);
        
        //Show results

        document.getElementById("monthlyPayment").innerHTML =
          "$" + monthlyPayment;

        document.getElementById("totalInterest").innerHTML =
          "$" + totalInterest;

        document.getElementById("totalPayment").innerHTML = "$" + totalPayment;

        e.preventDefault();
    
      google.charts.load('current', {'packages':['bar']});
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {
        var data = google.visualization.arrayToDataTable([
        ['Comparison','Total Amount','Principal','Monthly Payment','Total Interest'],
        [' ',totPay, principal, monthly, totInterest]
        ]);

        var options = {
          chart: {
            title: 'Loan Distribution',
            subtitle: 'See how the values compare to one another',
          },
          bars: 'vertical',
          vAxis: {format: 'decimal'},
          height: 350,
          colors: ['#91d7ff','#1b9e77', '#d95f02', '#7570b3']
        };

        var chart = new google.charts.Bar(document.getElementById('chart_div'));

        chart.draw(data, google.charts.Bar.convertOptions(options));

        var btns = document.getElementById('btn-group');

        btns.onclick = function (e) {

          if (e.target.tagName === 'BUTTON') {
            options.vAxis.format = e.target.id === 'none' ? '' : e.target.id;
            chart.draw(data, google.charts.Bar.convertOptions(options));
          }
        }
      }
      }

      
   
      
    </script>
  </body>
</html>
